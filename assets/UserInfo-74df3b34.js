import{_ as g,r as m,u as I,a as t,o as k,b as y,e as o,d as w,w as v,l as N}from"./index-7d98706d.js";import{d as i,p as C}from"./request-39338cfd.js";import{l as B,u as L}from"./auth-3a4db3a3.js";const x={class:"u-i"},A={class:"user-info"},D={__name:"UserInfo",setup(P){const n=m(""),r=m(""),{go:p}=I(),d=m([]),f=async e=>{const a=new FormData;a.append("file",e.file);const s=await C("/api/v1/common/upload_file",a);d.value=[{url:i(s.data)}],r.value=s.data},_=async()=>{await L({nickName:n.value,avatar:r.value}),p(-1)};B().then(e=>{r.value=e.data.avatar,n.value=e.data.nickName,d.value=e.data.avatar?[{url:i(e.data.avatar)}]:[]});const c=()=>{p(-1)};return(e,a)=>{const s=t("van-nav-bar"),V=t("van-uploader"),u=t("van-field"),b=t("van-cell-group"),U=t("van-button");return k(),y("div",x,[o(s,{title:"修改个人信息","left-text":"返回","left-arrow":"",onClickLeft:c}),w("div",A,[o(V,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=l=>d.value=l),"after-read":f,"max-count":"1"},null,8,["modelValue"]),o(b,{inset:""},{default:v(()=>[o(u,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=l=>n.value=l),label:"昵称",placeholder:"请输入昵称"},null,8,["modelValue"]),o(u,{modelValue:e.age,"onUpdate:modelValue":a[2]||(a[2]=l=>e.age=l),label:"年龄",placeholder:"请输入年龄"},null,8,["modelValue"]),o(u,{modelValue:e.gender,"onUpdate:modelValue":a[3]||(a[3]=l=>e.gender=l),label:"性别",placeholder:"请输入性别"},null,8,["modelValue"]),o(u,{modelValue:e.birthday,"onUpdate:modelValue":a[4]||(a[4]=l=>e.birthday=l),label:"生日",placeholder:"请输入生日"},null,8,["modelValue"])]),_:1}),o(U,{type:"primary",onClick:_},{default:v(()=>[N("保存")]),_:1})])])}}},F=g(D,[["__scopeId","data-v-13e4f5e4"]]);export{F as default};
